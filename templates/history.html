{% extends "base.html" %}

{% block content %}

<div class="container py-4">

    <h3 class="fw-bold mb-4">ðŸ“œ Full Interview History</h3>

    {% if interviews and interviews|length > 0 %}

        {% for interview in interviews %}

            <div class="card shadow-sm mb-4">
                <div class="card-body">

                    <!-- Header -->
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge bg-secondary">
                            {{ interview.interview_type|default('HR')|capitalize }}
                        </span>

                        <small class="text-muted">
                            {% if interview.created_at %}
                                {{ interview.created_at.strftime("%d %b %Y, %I:%M %p") }}
                            {% else %}
                                N/A
                            {% endif %}
                        </small>
                    </div>

                    <hr>

                    <!-- Question -->
                    <p class="fw-semibold">Question:</p>
                    <p>{{ interview.question }}</p>

                    <!-- Answer -->
                    <p class="fw-semibold mt-3">Your Answer:</p>
                    <p>{{ interview.answer }}</p>

                    <!-- Scores -->
                    <div class="row text-center mt-3">
                        <div class="col-md-6">
                            <span class="badge bg-info">
                                Grammar:
                                {{ interview.feedback.grammar_score if interview.feedback else 0 }}/10
                            </span>
                        </div>
                        <div class="col-md-6">
                            <span class="badge bg-primary">
                                Confidence:
                                {{ interview.feedback.confidence_score if interview.feedback else 0 }}/10
                            </span>
                        </div>
                    </div>

                    <hr>

                    <!-- Improved Answer -->
                    <p class="fw-semibold mt-3">Improved Answer:</p>
                    <p class="text-muted">
                        {{ interview.feedback.improved_answer if interview.feedback else "No improved answer available." }}
                    </p>

                </div>
            </div>

        {% endfor %}

    {% else %}

        <div class="alert alert-info">
            No interview history found.
        </div>

    {% endif %}

</div>

{% endblock %}
