{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-4">Complete Your Professional Profile</h3>

<form method="POST" enctype="multipart/form-data">

<!-- ================= PROFILE STRENGTH ================= -->
<div class="glass-card p-4 mb-4 text-center">
    <h5 class="fw-bold mb-3">Profile Strength</h5>

    <div class="progress mb-3" style="height: 22px;">
        <div class="progress-bar bg-success"
             role="progressbar"
             style="width: {{ profile_strength }}%;">
            {{ profile_strength }}%
        </div>
    </div>
</div>

<!-- ================= PERSONAL INFO ================= -->
<div class="glass-card p-4 mb-4">
<h5 class="fw-bold mb-3">Personal Information</h5>

<div class="row">

<div class="col-md-6 mb-3">
<label>Phone</label>
<input type="text" name="phone" class="form-control"
value="{{ profile.personal.phone if profile.personal else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>City</label>
<input type="text" name="city" class="form-control"
value="{{ profile.personal.city if profile.personal else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>Date of Birth</label>
<input type="date" name="dob" class="form-control"
value="{{ profile.personal.dob if profile.personal else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>Gender</label>
<select name="gender" class="form-control">
<option value="">Select</option>
<option value="Male"
{% if profile.personal and profile.personal.gender == "Male" %}selected{% endif %}>Male</option>
<option value="Female"
{% if profile.personal and profile.personal.gender == "Female" %}selected{% endif %}>Female</option>
<option value="Other"
{% if profile.personal and profile.personal.gender == "Other" %}selected{% endif %}>Other</option>
</select>
</div>

<div class="col-12 mb-3">
<label>Address</label>
<textarea name="address" class="form-control">{{ profile.personal.address if profile.personal else '' }}</textarea>
</div>

</div>
</div>

<!-- ================= PROFESSIONAL DETAILS ================= -->
<div class="glass-card p-4 mb-4">
<h5 class="fw-bold mb-3">Professional Details</h5>

<div class="row">

<div class="col-md-6 mb-3">
<label>Preferred Role</label>
<input type="text" name="preferred_role" class="form-control"
value="{{ profile.professional.preferred_role if profile.professional else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>Years of Experience</label>
<input type="number" name="experience" class="form-control"
value="{{ profile.professional.experience_years if profile.professional else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>Current Status</label>
<select name="current_status" class="form-control">
<option value="">Select</option>
<option value="Student"
{% if profile.professional and profile.professional.current_status == "Student" %}selected{% endif %}>Student</option>
<option value="Fresher"
{% if profile.professional and profile.professional.current_status == "Fresher" %}selected{% endif %}>Fresher</option>
<option value="Working Professional"
{% if profile.professional and profile.professional.current_status == "Working Professional" %}selected{% endif %}>Working Professional</option>
</select>
</div>

<div class="col-md-6 mb-3">
<label>LinkedIn</label>
<input type="text" name="linkedin" class="form-control"
value="{{ profile.professional.linkedin if profile.professional else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>GitHub</label>
<input type="text" name="github" class="form-control"
value="{{ profile.professional.github if profile.professional else '' }}">
</div>

<div class="col-md-6 mb-3">
<label>Portfolio</label>
<input type="text" name="portfolio" class="form-control"
value="{{ profile.professional.portfolio if profile.professional else '' }}">
</div>

<div class="col-12 mb-3">
<label>Career Objective</label>
<textarea name="career_objective" class="form-control" rows="3">
{{ profile.professional.career_objective if profile.professional else '' }}
</textarea>
</div>

</div>
</div>

<!-- ================= PROJECTS ================= -->
<div class="glass-card p-4 mb-4">
    <h5 class="fw-bold mb-3">Projects</h5>
    
    <div id="project-container">
    
    {% if profile.projects %}
        {% for proj in profile.projects %}
            <div class="project-item mb-3 border p-3 rounded">
                <input type="text" name="project_title"
                       class="form-control mb-2"
                       value="{{ proj.title }}"
                       placeholder="Project Title">
    
                <textarea name="project_description"
                          class="form-control"
                          placeholder="Project Description">{{ proj.description }}</textarea>
            </div>
        {% endfor %}
    {% else %}
        <div class="project-item mb-3 border p-3 rounded">
            <input type="text" name="project_title"
                   class="form-control mb-2"
                   placeholder="Project Title">
    
            <textarea name="project_description"
                      class="form-control"
                      placeholder="Project Description"></textarea>
        </div>
    {% endif %}
    
    </div>
    
    <button type="button" class="btn btn-outline-primary btn-sm"
            onclick="addProject()">+ Add Project</button>
    </div>
    

<!-- ================= CERTIFICATIONS ================= -->
<div class="glass-card p-4 mb-4">
    <h5 class="fw-bold mb-3">Certifications</h5>
    
    <div id="cert-container">
    
    {% if profile.certifications %}
        {% for cert in profile.certifications %}
            <input type="text" name="certification"
                   class="form-control mb-2"
                   value="{{ cert }}">
        {% endfor %}
    {% else %}
        <input type="text" name="certification"
               class="form-control mb-2"
               placeholder="Certification">
    {% endif %}
    
    </div>
    
    <button type="button" class="btn btn-outline-primary btn-sm"
            onclick="addCertification()">+ Add Certification</button>
    </div>
    

<!-- ================= ACHIEVEMENTS ================= -->
<div class="glass-card p-4 mb-4">
    <h5 class="fw-bold mb-3">Achievements</h5>
    
    <div id="achievement-container">
    
    {% if profile.achievements %}
        {% for ach in profile.achievements %}
            <input type="text" name="achievement"
                   class="form-control mb-2"
                   value="{{ ach }}">
        {% endfor %}
    {% else %}
        <input type="text" name="achievement"
               class="form-control mb-2"
               placeholder="Achievement">
    {% endif %}
    
    </div>
    
    <button type="button" class="btn btn-outline-primary btn-sm"
            onclick="addAchievement()">+ Add Achievement</button>
    </div>
    

<button class="btn btn-primary w-100 mb-5">
Save Profile
</button>

</form>

<script>
    function addProject() {
        const container = document.getElementById("project-container");
    
        const div = document.createElement("div");
        div.classList.add("project-item", "mb-3", "border", "p-3", "rounded");
    
        div.innerHTML = `
            <input type="text" name="project_title"
                   class="form-control mb-2"
                   placeholder="Project Title">
    
            <textarea name="project_description"
                      class="form-control"
                      placeholder="Project Description"></textarea>
        `;
    
        container.appendChild(div);
    }
    
    function addCertification() {
        const container = document.getElementById("cert-container");
    
        const input = document.createElement("input");
        input.type = "text";
        input.name = "certification";
        input.className = "form-control mb-2";
        input.placeholder = "Certification";
    
        container.appendChild(input);
    }
    
    function addAchievement() {
        const container = document.getElementById("achievement-container");
    
        const input = document.createElement("input");
        input.type = "text";
        input.name = "achievement";
        input.className = "form-control mb-2";
        input.placeholder = "Achievement";
    
        container.appendChild(input);
    }
    </script>
    

{% endblock %}
