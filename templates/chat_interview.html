{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-4">ðŸ’¬ AI Chat Mock Interview</h3>

<div class="card shadow-sm mb-4">
    <div class="card-body">

        <!-- Interview Type Selector -->
        <form method="GET" class="mb-3">
            <div class="row">
                <div class="col-md-6">
                    <select name="type" class="form-select">
                        <option value="hr" {% if interview_type == "hr" %}selected{% endif %}>HR Interview</option>
                        <option value="technical" {% if interview_type == "technical" %}selected{% endif %}>Technical Interview</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-primary w-100">
                        Start Interview
                    </button>
                </div>
            </div>
        </form>

        <hr>

        <!-- Chat Window -->
        <div class="border rounded p-3 mb-3"
             style="height:400px; overflow-y:auto; background:#f8f9fa;"
             id="chatBox">

            {% if chat_history %}
                {% for msg in chat_history %}
                    <div class="mb-3">
                        <strong class="{% if msg.role == 'ai' %}text-primary{% else %}text-success{% endif %}">
                            {{ msg.role|capitalize }}:
                        </strong>
                        <div>{{ msg.message }}</div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="text-muted">
                    AI Interviewer: Hello! Letâ€™s begin your mock interview.  
                    Tell me about yourself.
                </div>
            {% endif %}

        </div>

        <!-- User Input -->
        <form method="POST">
            <input type="hidden" name="interview_type" value="{{ interview_type }}">

            <div class="input-group">
                <input type="text"
                       name="user_message"
                       class="form-control"
                       placeholder="Type your response..."
                       required>
                <button class="btn btn-success">
                    Send
                </button>
            </div>
        </form>

    </div>
</div>

{% endblock %}
